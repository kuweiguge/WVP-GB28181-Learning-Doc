import{_ as s,r as i,o as l,c as a,a as e,b as n,d as t,e as r}from"./app-NmqmjXM3.js";const d={},c=e("h1",{id:"sip协议",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#sip协议","aria-hidden":"true"},"#"),n(" SIP协议")],-1),g=e("h2",{id:"了解sip协议基础",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#了解sip协议基础","aria-hidden":"true"},"#"),n(" 了解SIP协议基础")],-1),h={class:"custom-container tip"},p=e("p",{class:"custom-container-title"},"提示",-1),u={href:"https://tinyurl.com/56dnbaaw",target:"_blank",rel:"noopener noreferrer"},I=e("h3",{id:"sip协议的主要特点包括",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#sip协议的主要特点包括","aria-hidden":"true"},"#"),n(" SIP协议的"),e("strong",null,"主要特点"),n("包括：")],-1),_=e("strong",null,"基于文本",-1),b={href:"https://tinyurl.com/56dnbaaw",target:"_blank",rel:"noopener noreferrer"},m=e("strong",null,"灵活性",-1),S={href:"https://tinyurl.com/56dnbaaw",target:"_blank",rel:"noopener noreferrer"},P=e("strong",null,"可扩展性",-1),v={href:"https://tinyurl.com/56dnbaaw",target:"_blank",rel:"noopener noreferrer"},C={href:"https://tinyurl.com/56dnbaaw",target:"_blank",rel:"noopener noreferrer"},f=e("strong",null,"工作原理",-1),T=e("strong",null,"会话",-1),E=e("h3",{id:"sip协议的组成部分",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#sip协议的组成部分","aria-hidden":"true"},"#"),n(" SIP协议的"),e("strong",null,"组成部分")],-1),V={href:"https://tinyurl.com/56dnbaaw",target:"_blank",rel:"noopener noreferrer"},x=r(`<ol><li><strong>请求行</strong>：请求行包含了请求的方法和请求的URI。常见的请求方法有INVITE、ACK、BYE等。</li><li><strong>头部字段</strong>：头部字段包含了关于请求的各种信息，如From（发件人）、To（收件人）、Call-ID（呼叫标识）等。</li><li><strong>消息体</strong>：消息体包含了请求的具体内容，如SDP（会话描述协议）。</li></ol><p>一个GB28181协议中的SIP<code>INVITE</code>请求长这样：</p><div class="language-sip line-numbers-mode" data-ext="sip"><pre class="language-sip"><code>INVITE sip:34020000002000000001@3402000000 SIP/2.0
Via: SIP/2.0/UDP 192.168.0.100:5060;rport;branch=z9hG4bK34020000001320000001
From: &lt;sip:34020000001320000001@3402000000&gt;;tag=34020000001320000001
To: &lt;sip:34020000002000000001@3402000000&gt;
Call-ID: 3402000000132000000120190815100052
CSeq: 20 INVITE
Contact: &lt;sip:34020000001320000001@192.168.0.100:5060&gt;
Max-Forwards: 70
User-Agent: IP Camera
Subject: 34020000001320000001:34020000002000000001,34020000002000000001:0201832000000001
Content-Type: application/sdp
Content-Length: 187
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>逐行解释一下，这些都是开发中会遇到的概念：</p><ol><li><strong>请求行</strong>：<code>INVITE sip:34020000002000000001@3402000000 SIP/2.0</code><ul><li><code>INVITE</code>是一个SIP方法，在GB28181协议中，<code>INVITE</code>通常用于<strong>请求视频流</strong>。</li><li><code>sip:34020000002000000001@3402000000</code>是URI；在SIP协议中，URI通常用于标识<strong>会话的参与者</strong>。这个URI可能表示一个摄像头设备。</li><li><code>SIP/2.0</code> SIP协议版本。</li></ul></li><li><strong>Via头部字段</strong>：<code>Via: SIP/2.0/UDP 192.168.0.100:5060;rport;branch=z9hG4bK34020000001320000001</code> 用于记录请求的转发路径。 <ul><li><code>branch</code>用于唯一标识一个<strong>事务</strong>，可以帮助SIP设备正确地匹配请求和响应。一个请求和它的所有响应的<code>branch</code>不变。</li></ul></li><li><strong>From头部字段</strong>：<code>From: &lt;sip:34020000001320000001@3402000000&gt;;tag=34020000001320000001</code> 表示请求的发送者。 <ul><li><code>tag</code>用于唯一标识一个对话，一个对话通常包括一个或多个事务。当摄像头发送<code>REGISTER</code>请求时,生成一个<code>tag</code>,填充在<code>From</code>头中,并在后续与这个注册会话相关的所有SIP消息中使用这个<code>Tag</code></li></ul></li><li><strong>To头部字段</strong>：<code>To: &lt;sip:34020000002000000001@3402000000&gt;</code> 表示请求的接收者。 <ul><li>当这个是服务器响应消息时，SIP服务器需要会填充tag，对于每个新的请求SIP服务器在响应时都会填充一个新的toTag</li></ul></li><li><strong>Call-ID头部字段</strong>：<code>Call-ID: 3402000000132000000120190815100052</code> 用于唯一标识一个会话。 <ul><li>例如在摄像头注册的过程中，所有SIP消息中使用同一个<code>Call-ID</code></li></ul></li><li><strong>CSeq头部字段</strong>：<code>CSeq: 20 INVITE</code> 这是CSeq头部字段，用于标识请求的序列号和方法。</li><li><strong>Contact头部字段</strong>：<code>Contact: &lt;sip:34020000001320000001@192.168.0.100:5060&gt;</code> 这是Contact头部字段，表示请求的发送者的联系信息。</li><li><strong>Max-Forwards头部字段</strong>：<code>Max-Forwards: 70</code> 这是Max-Forwards头部字段，用于限制请求的最大转发次数。</li><li><strong>User-Agent头部字段</strong>：<code>User-Agent: IP Camera</code> 这是User-Agent头部字段，表示请求的发送者的用户代理信息。</li><li><strong>Subject头部字段</strong>：<code>Subject: 34020000001320000001:34020000002000000001,34020000002000000001:0201832000000001</code> 这是Subject头部字段，表示请求的主题。</li><li><strong>Content-Type头部字段</strong>：<code>Content-Type: application/sdp</code> 这是Content-Type头部字段，表示消息体的媒体类型。</li><li><strong>Content-Length头部字段</strong>：<code>Content-Length: 187</code> 这是Content-Length头部字段，表示消息体的长度。</li></ol><h3 id="sip协议的工作流程" tabindex="-1"><a class="header-anchor" href="#sip协议的工作流程" aria-hidden="true">#</a> SIP协议的工作流程</h3>`,6),N={href:"https://tinyurl.com/56dnbaaw",target:"_blank",rel:"noopener noreferrer"},y=r("<ol><li><strong>发起请求</strong>：客户端向服务器发送一个INVITE请求，请求建立一个会话。</li><li><strong>接收响应</strong>：服务器收到请求后，返回一个100 Trying响应，表示正在处理请求。</li><li><strong>发送确认</strong>：服务器处理完请求后，返回一个200 OK响应，表示请求已被接受。客户端收到200 OK响应后，发送一个ACK请求，表示已收到响应。</li><li><strong>维持会话</strong>：在会话期间，客户端和服务器可以通过发送INFO、UPDATE等请求来更新会话状态。</li><li><strong>结束会话</strong>：当会话结束时，客户端向服务器发送一个BYE请求，请求结束会话。服务器收到BYE请求后，返回一个200 OK响应，表示会话已被结束。</li></ol>",1);function k(w,U){const o=i("ExternalLinkIcon");return l(),a("div",null,[c,g,e("div",h,[p,e("p",null,[e("a",u,[n("SIP"),t(o)]),n("（Session Initiation Protocol）是一种基于文本的协议，用于创建、修改和终止包括语音、视频、即时消息、在线游戏和虚拟现实在内的多媒体会话。")])]),I,e("ol",null,[e("li",null,[_,n("："),e("a",b,[n("SIP协议"),t(o)]),n("的消息是基于文本的，这使得它易于理解和调试。")]),e("li",null,[m,n("："),e("a",S,[n("SIP协议"),t(o)]),n("可以用于创建各种类型的多媒体会话，不仅限于语音和视频通话。")]),e("li",null,[P,n("："),e("a",v,[n("SIP协议"),t(o)]),n("可以通过添加新的方法和头部字段来进行扩展。")])]),e("p",null,[e("a",C,[n("SIP协议"),t(o)]),n("的"),f,n("是通过发送请求和接收响应来建立"),T,n("。请求可以是INVITE（邀请）、ACK（确认）、BYE（结束）等，响应可以是100（试图）、200（成功）等。")]),E,e("p",null,[e("a",V,[n("SIP协议"),t(o)]),n("主要由以下几个部分组成：")]),x,e("p",null,[e("a",N,[n("SIP协议"),t(o)]),n("的工作流程通常包括以下几个步骤：")]),y])}const B=s(d,[["render",k],["__file","sip.html.vue"]]);export{B as default};
